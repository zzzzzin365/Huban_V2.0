# ä¹å‘¼å¿—æ„¿è€…åŒ¹é…åº”ç”¨ - åç«¯æœåŠ¡

## ğŸ¯ é¡¹ç›®ç®€ä»‹

ä¹å‘¼å¿—æ„¿è€…åŒ¹é…åº”ç”¨æ˜¯ä¸€ä¸ªåŸºäºNode.jsæ„å»ºçš„æ™ºèƒ½å¿—æ„¿è€…åŒ¹é…å¹³å°ï¼Œé›†æˆäº†JWTç”¨æˆ·è®¤è¯ã€MySQLæ•°æ®å»ºæ¨¡ã€Redisç¼“å­˜å’ŒåŒºå—é“¾å­˜è¯ç­‰å…ˆè¿›æŠ€æœ¯ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **JWTä»¤ç‰Œè®¤è¯**ï¼šæ”¯æŒè®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œ
- **è§’è‰²æƒé™ç®¡ç†**ï¼šç”¨æˆ·ã€å¿—æ„¿è€…ã€ç®¡ç†å‘˜ã€è¶…çº§ç®¡ç†å‘˜
- **å®‰å…¨ä¸­é—´ä»¶**ï¼šè®¤è¯ã€æˆæƒã€é™æµã€CORSç­‰

### ğŸ—„ï¸ æ•°æ®å­˜å‚¨
- **MySQLæ•°æ®åº“**ï¼šä½¿ç”¨Sequelize ORMè¿›è¡Œæ•°æ®å»ºæ¨¡
- **Redisç¼“å­˜**ï¼šç”¨æˆ·ä¼šè¯ã€æ•°æ®ç¼“å­˜ã€ä»¤ç‰Œé»‘åå•
- **æ•°æ®å…³è”**ï¼šå®Œæ•´çš„ç”¨æˆ·-å¿—æ„¿è€…-å¸®åŠ©è¯·æ±‚å…³ç³»æ¨¡å‹

### â›“ï¸ åŒºå—é“¾é›†æˆ
- **å¤šé“¾æ”¯æŒ**ï¼šä»¥å¤ªåŠã€Polygonã€BSC
- **æ™ºèƒ½åˆçº¦**ï¼šè¯æ®å­˜å‚¨ã€éªŒè¯ã€æŸ¥è¯¢
- **å­˜è¯æœåŠ¡**ï¼šå¿—æ„¿è€…è®¤è¯ã€å¸®åŠ©è®°å½•ã€è¯„ä»·ä¿¡æ¯

### ğŸš€ æ€§èƒ½ä¼˜åŒ–
- **è¿æ¥æ± ç®¡ç†**ï¼šæ•°æ®åº“å’ŒRedisè¿æ¥ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**ï¼šå¤šçº§ç¼“å­˜ã€æ™ºèƒ½è¿‡æœŸ
- **é™æµä¿æŠ¤**ï¼šAPIè¯·æ±‚é¢‘ç‡æ§åˆ¶

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React Native  â”‚    â”‚   Web Client    â”‚    â”‚   Mobile App    â”‚
â”‚     Frontend    â”‚    â”‚    Frontend     â”‚    â”‚    Frontend     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Nginx Proxy   â”‚
                    â”‚   (Optional)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Express.js API â”‚
                    â”‚   Backend       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MySQL DB      â”‚    â”‚   Redis Cache   â”‚    â”‚  Blockchain     â”‚
â”‚   (Sequelize)   â”‚    â”‚   (Session)     â”‚    â”‚  (Ethereum)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 16.0.0
- **MySQL**: >= 8.0
- **Redis**: >= 6.0
- **Docker**: >= 20.0 (å¯é€‰)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd volunteer-matching-backend
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®

å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š

```bash
cp env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š

```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=volunteer_matching

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379

# JWTé…ç½®
JWT_SECRET=your-super-secret-jwt-key

# åŒºå—é“¾é…ç½®
ETH_RPC_URL=https://sepolia.infura.io/v3/your-project-id
ETH_PRIVATE_KEY=your-private-key
```

### 4. æ•°æ®åº“è¿ç§»

```bash
npm run migrate
```

### 5. å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

## ğŸ³ Dockeréƒ¨ç½²

### ä½¿ç”¨Docker Compose

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend

# åœæ­¢æœåŠ¡
docker-compose down
```

### å•ç‹¬æ„å»ºé•œåƒ

```bash
# æ„å»ºåç«¯é•œåƒ
docker build -t volunteer-matching-backend .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 volunteer-matching-backend
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/           # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ database.js   # MySQLé…ç½®
â”‚   â”‚   â”œâ”€â”€ redis.js      # Redisé…ç½®
â”‚   â”‚   â”œâ”€â”€ blockchain.js # åŒºå—é“¾é…ç½®
â”‚   â”‚   â””â”€â”€ jwt.js        # JWTé…ç½®
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ User.js       # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â””â”€â”€ Volunteer.js  # å¿—æ„¿è€…æ¨¡å‹
â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ auth.js       # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ routes/           # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ auth.js       # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ volunteers.js # å¿—æ„¿è€…è·¯ç”±
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â””â”€â”€ BlockchainService.js # åŒºå—é“¾æœåŠ¡
â”‚   â””â”€â”€ app.js            # åº”ç”¨å…¥å£
â”œâ”€â”€ scripts/              # è„šæœ¬æ–‡ä»¶
â”‚   â””â”€â”€ migrate.js        # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ docker-compose.yml    # Dockerç¼–æ’
â”œâ”€â”€ Dockerfile            # Dockeré•œåƒ
â”œâ”€â”€ package.json          # ä¾èµ–é…ç½®
â””â”€â”€ README.md             # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”Œ APIæ¥å£

### è®¤è¯æ¥å£

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | `/api/auth/register` | ç”¨æˆ·æ³¨å†Œ |
| POST | `/api/auth/login` | ç”¨æˆ·ç™»å½• |
| POST | `/api/auth/refresh` | åˆ·æ–°ä»¤ç‰Œ |
| POST | `/api/auth/logout` | ç”¨æˆ·ç™»å‡º |

### å¿—æ„¿è€…æ¥å£

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET | `/api/volunteers` | è·å–å¿—æ„¿è€…åˆ—è¡¨ |
| GET | `/api/volunteers/nearby` | è·å–é™„è¿‘å¿—æ„¿è€… |
| POST | `/api/volunteers` | åˆ›å»ºå¿—æ„¿è€… |
| PUT | `/api/volunteers/:id` | æ›´æ–°å¿—æ„¿è€…ä¿¡æ¯ |

### åŒºå—é“¾æ¥å£

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | `/api/blockchain/evidence` | å­˜å‚¨è¯æ® |
| GET | `/api/blockchain/evidence/:hash` | éªŒè¯è¯æ® |
| GET | `/api/blockchain/stats` | è·å–ç»Ÿè®¡ä¿¡æ¯ |

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡å‹

1. åœ¨ `src/models/` ç›®å½•åˆ›å»ºæ¨¡å‹æ–‡ä»¶
2. å®šä¹‰æ•°æ®ç»“æ„å’Œå…³è”å…³ç³»
3. åœ¨ `scripts/migrate.js` ä¸­å¯¼å…¥æ¨¡å‹
4. è¿è¡Œè¿ç§»è„šæœ¬

### æ·»åŠ æ–°è·¯ç”±

1. åœ¨ `src/routes/` ç›®å½•åˆ›å»ºè·¯ç”±æ–‡ä»¶
2. å®šä¹‰è·¯ç”±å¤„ç†å‡½æ•°
3. åœ¨ `src/app.js` ä¸­æ³¨å†Œè·¯ç”±
4. æ·»åŠ å¿…è¦çš„ä¸­é—´ä»¶

### æ·»åŠ æ–°æœåŠ¡

1. åœ¨ `src/services/` ç›®å½•åˆ›å»ºæœåŠ¡æ–‡ä»¶
2. å®ç°ä¸šåŠ¡é€»è¾‘
3. åœ¨è·¯ç”±ä¸­è°ƒç”¨æœåŠ¡
4. æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•å¹¶ç›‘å¬å˜åŒ–
npm run test:watch

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### æµ‹è¯•ç¯å¢ƒé…ç½®

åˆ›å»º `.env.test` æ–‡ä»¶ï¼š

```env
NODE_ENV=test
DB_NAME=volunteer_matching_test
REDIS_DB=1
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### å¥åº·æ£€æŸ¥

```bash
curl http://localhost:3000/health
```

### æ—¥å¿—é…ç½®

- åº”ç”¨æ—¥å¿—ï¼š`./logs/app.log`
- é”™è¯¯æ—¥å¿—ï¼š`./logs/error.log`
- è®¿é—®æ—¥å¿—ï¼šæ§åˆ¶å°è¾“å‡º

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **Helmet**: å®‰å…¨å¤´è®¾ç½®
- **CORS**: è·¨åŸŸèµ„æºå…±äº«æ§åˆ¶
- **Rate Limiting**: APIé™æµä¿æŠ¤
- **JWT**: å®‰å…¨çš„ä»¤ç‰Œè®¤è¯
- **Input Validation**: è¾“å…¥æ•°æ®éªŒè¯
- **SQL Injection Protection**: Sequelize ORMä¿æŠ¤

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

- **è¿æ¥æ± **: æ•°æ®åº“å’ŒRedisè¿æ¥å¤ç”¨
- **ç¼“å­˜ç­–ç•¥**: å¤šçº§ç¼“å­˜ã€æ™ºèƒ½è¿‡æœŸ
- **å¼‚æ­¥å¤„ç†**: éé˜»å¡I/Oæ“ä½œ
- **è´Ÿè½½å‡è¡¡**: æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…ï¼š[Your Name]
- é‚®ç®±ï¼š[your.email@example.com]
- é¡¹ç›®é“¾æ¥ï¼š[https://github.com/username/volunteer-matching-backend](https://github.com/username/volunteer-matching-backend)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

**æ³¨æ„**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²å‰ï¼Œè¯·ç¡®ä¿ï¼š
1. ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç å’Œå¯†é’¥
2. é…ç½®é€‚å½“çš„é˜²ç«å¢™è§„åˆ™
3. å¯ç”¨HTTPS
4. å®šæœŸå¤‡ä»½æ•°æ®åº“
5. ç›‘æ§ç³»ç»Ÿæ€§èƒ½å’Œå®‰å…¨
